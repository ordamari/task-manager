(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{45:function(e,t,a){e.exports=a(59)},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(20),o=a.n(i),s=a(22),l=a(41),r=a(18),u=a(7),d=a(3),m=a(2),f=a(4),b={tasks:{t101:{id:"t101",contact:"buy food",info:{media:"",show:!0,tdList:[{title:"chips",isFinish:!1},{title:"bamba",isFinish:!0},{title:"apropo",isFinish:!0}]}},t102:{id:"t102",contact:"buy drink",info:{media:"",show:!0,tdList:[{title:"kola",isFinish:!1},{title:"spring",isFinish:!0},{title:"orange juice",isFinish:!0}]}},t103:{id:"t103",contact:"choose song",info:{media:"https://www.youtube.com/watch?v=t4-Z8vVMRBs",show:!0}},t104:{id:"t104",contact:"invite friends",info:{media:"",show:!0,tdList:[{title:"guy",isFinish:!1},{title:"sapir",isFinish:!0},{title:"oshri",isFinish:!0}]}},t105:{id:"t105",contact:"party",info:{media:"https://amp.thenationalnews.com/image/policy:1.1042483:1593608070/tr30-June-Ibiza.jpg?f=16x9&w=1200&$p$f$w=ae152f2",show:!0}}},colums:{c101:{id:"c101",title:"Todo",taskIds:["t102","t104"]},c102:{id:"c102",title:"Doing",taskIds:["t105","t103"]},c103:{id:"c103",title:"Done",taskIds:["t101"]}},columnOrder:["c101","c102","c103"]},p=["t101","t102"];var k={query:function(){return Object(m.a)({},b)},updateData:function(e){b=e},getLocks:function(){return Object(u.a)(p)},updateLocks:function(e){p=e}},g=a(17);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=Object(n.useState)(e),c=Object(f.a)(a,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){t(i)}),[i]),[i,function(e){if(e){var t="number"===e.target.type?+e.target.value:e.target.value;o(Object(m.a)({},i,Object(d.a)({},e.target.name,t)))}else o({contact:"",title:""})}]}function O(e){var t=e.addTask,a=e.columnId,n=v({contact:""}),i=Object(f.a)(n,2),o=i[0],s=i[1];return c.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault(),t(o.contact,a),s()}(e)}},c.a.createElement("input",{name:"contact",autoComplete:"off",placeholder:"Add task",value:o.contact,onChange:s,type:"text"}))}var E=a(19),h=a.n(E),j=a(35),w=a.n(j),y=a(39),I=a.n(y),x=a(38),D=a.n(x),T=a(37),C=a.n(T),N=a(27),S=a.n(N),L=a(40),F=a.n(L),_=a(26),A=a.n(_),P=a(34),R=a.n(P),U=a(21),M=a.n(U);function K(e){var t=e.editData,a=e.taskId,n=e.toggleDataEdit,i=v({media:""}),o=Object(f.a)(i,2),s=o[0],l=o[1];return c.a.createElement("form",{onSubmit:function(e){!function(e){t(a,s.media),e.preventDefault(),n()}(e)}},c.a.createElement("input",{name:"media",autoComplete:"off",placeholder:"img or youtube link",value:s.media,onChange:l,type:"text"}))}function $(e){var t=e.addTD,a=e.taskId,n=v({title:""}),i=Object(f.a)(n,2),o=i[0],s=i[1];return c.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault(),t(a,o.title),s()}(e)}},c.a.createElement("input",{name:"title",autoComplete:"off",placeholder:"Add To Do",value:o.title,onChange:s,type:"text"}))}var B={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}},J={uploadImg:function(e){var t,a,n,c;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return"dif8yy3on",t="https://api.cloudinary.com/v1_1/".concat("dif8yy3on","/image/upload"),(a=new FormData).append("file",e.target.files[0]),a.append("upload_preset","misterToy"),i.prev=5,i.next=8,h.a.awrap(fetch(t,{method:"POST",body:a}));case 8:return n=i.sent,i.next=11,h.a.awrap(n.json());case 11:return c=i.sent,i.abrupt("return",c);case 15:i.prev=15,i.t0=i.catch(5),console.log(i.t0);case 18:case"end":return i.stop()}}),null,null,[[5,15]])}};var V=a(36),q=a.n(V);function z(e){var t=e.task,a=e.index,i=e.removeTask,o=e.columnId,s=e.lockTasks,l=e.createTD,r=e.toggleIsLock,d=e.toggleIsShown,m=e.editData,b=e.addTD,p=e.toggleIsFinish,k=e.removeTD,v=s.some((function(e){return e===t.id})),O=Object(n.useState)(!1),E=Object(f.a)(O,2),j=E[0],y=E[1],x=Object(n.useState)(!1),T=Object(f.a)(x,2),N=T[0],L=T[1];Object(n.useEffect)((function(){return B.on("toggle-is-open",(function(e){e!==t.id&&y(!1)})),B.on("close-menu",(function(e){e===t.id&&y(!1)})),function(){null,null}}),[]);var _=function(){L(!N)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];B.emit("toggle-is-open",t.id),L(!1),e.apply(void 0,Object(u.a)(a)),y(!j)},U=function(e){var a,n;return h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.target.name,c.prev=1,c.next=4,h.a.awrap(J.uploadImg(e));case 4:a=c.sent,n=a.secure_url,m(t.id,n),L(!1),c.next=12;break;case 10:c.prev=10,c.t0=c.catch(1);case 12:case"end":return c.stop()}}),null,null,[[1,10]])};return c.a.createElement(g.b,{draggableId:t.id,index:a,isDragDisabled:v},(function(e,a){return c.a.createElement("li",Object.assign({},e.draggableProps,{ref:e.innerRef,className:"".concat(a.isDragging?"dragging":""," ").concat(v?"no-drag":""," flex space-between align-center task")}),c.a.createElement("div",{className:"flex column"},c.a.createElement("div",{className:"flex space-between title"},c.a.createElement("div",{className:"flex align-center "},c.a.createElement("div",Object.assign({className:"handle"},e.dragHandleProps)),c.a.createElement("p",null,t.contact)),c.a.createElement("div",{className:"flex align-center"},t.info.media&&"youtube"!==t.info.media.split(".")[1]&&c.a.createElement(A.a,null),t.info.media&&"youtube"===t.info.media.split(".")[1]&&c.a.createElement(R.a,null),t.info.tdList&&c.a.createElement(S.a,null),c.a.createElement("button",{className:"menu-btn",onClick:function(){return P()}},c.a.createElement(w.a,null)))),t.info.media&&t.info.show&&"youtube"!==t.info.media.split(".")[1]&&c.a.createElement("img",{src:t.info.media,alt:""}),t.info.media&&t.info.show&&"youtube"===t.info.media.split(".")[1]&&c.a.createElement("iframe",{width:"180",height:"150",title:t.contacts,src:"https://www.youtube.com/embed/".concat(t.info.media.split("watch?v=")[1])}),t.info.tdList&&t.info.show&&c.a.createElement("div",{className:"list-container"},c.a.createElement("ul",{className:"list"},t.info.tdList.map((function(e,a){return c.a.createElement("li",{className:"flex space-between",key:a},c.a.createElement("div",{className:"flex align-center ".concat(e.isFinish?"done":"")},c.a.createElement("input",{onClick:function(){return p(t.id,a)},type:"checkbox",defaultChecked:e.isFinish}),e.title),c.a.createElement("button",{onClick:function(){return k(t.id,a)}},c.a.createElement(M.a,null)))}))),c.a.createElement($,{addTD:b,taskId:t.id}))),N&&c.a.createElement("div",{className:"edit-container"},c.a.createElement("div",{className:"flex flex-end"},c.a.createElement("button",{onClick:_},c.a.createElement(M.a,null))),c.a.createElement(K,{editData:m,taskId:t.id,toggleDataEdit:_}),c.a.createElement("label",{className:"upload-btn flex align-center",htmlFor:"upload-file"},c.a.createElement(q.a,null)," Upload Img "),c.a.createElement("input",{hidden:!0,type:"file",className:"file-input",name:"img",id:"upload-file",onChange:U})),j&&c.a.createElement("div",{className:"menu"},c.a.createElement("button",{onClick:function(){P()}},c.a.createElement(M.a,null)," close"),!v&&c.a.createElement("button",{onClick:function(){P(i,[t.id,o])}},c.a.createElement(C.a,null)," Remove"),c.a.createElement("button",{onClick:function(){P(r,[t.id])}},v?c.a.createElement(D.a,null):c.a.createElement(I.a,null)," ",v?"Unlock":"Lock"),c.a.createElement("button",{onClick:function(){P(d,[t.id])}},c.a.createElement(F.a,null)," ",t.info.show?"Unshow":"Show"),c.a.createElement("button",{onClick:function(){P(_)}},c.a.createElement(A.a,null)," Media"),c.a.createElement("button",{onClick:function(){P(l,[t.id])}},c.a.createElement(S.a,null)," List")))}))}function H(e){var t=e.column,a=e.tasks,n=e.index,i=e.addTask,o=e.createTD,s=e.removeColumn,l=e.removeTask,r=e.lockTasks,u=e.toggleIsLock,d=e.toggleIsShown,m=e.editData,f=e.addTD,b=e.toggleIsFinish,p=e.removeTD;return c.a.createElement(g.b,{draggableId:t.id,index:n},(function(e){return c.a.createElement("li",Object.assign({className:"columns"},e.draggableProps,{ref:e.innerRef}),c.a.createElement("div",{className:"flex flex-end"},c.a.createElement("button",{onClick:function(){s(t.id,n)}},c.a.createElement(M.a,null))),c.a.createElement("h2",e.dragHandleProps,t.title),c.a.createElement(g.c,{droppableId:t.id,type:"task"},(function(e,n){return c.a.createElement("ul",Object.assign({ref:e.innerRef},e.droppableProps,{className:"flex column ".concat(n.isDraggingOver?"dragging":"")}),a.map((function(e,a){return c.a.createElement(z,{editData:m,toggleIsFinish:b,addTD:f,key:e.id,toggleIsShown:d,task:e,index:a,removeTask:l,columnId:t.id,lockTasks:r,toggleIsLock:u,removeTD:p,createTD:o})})),c.a.createElement("div",{className:"place-holder"},e.placeholder))})),c.a.createElement(O,{addTask:i,columnId:t.id}))}))}function W(){return"_"+Math.random().toString(36).substr(2,9)}function X(e){var t=e.addColumn,a=v({title:""}),n=Object(f.a)(a,2),i=n[0],o=n[1];return c.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault(),t(i.title),o()}(e)}},c.a.createElement("input",{name:"title",autoComplete:"off",placeholder:"Add card",value:i.title,onChange:o,type:"text"}))}function Z(e){var t=Object(n.useState)(k.query()),a=Object(f.a)(t,2),i=a[0],o=a[1],s=Object(n.useState)(k.getLocks()),l=Object(f.a)(s,2),r=l[0],b=l[1];Object(n.useEffect)((function(){k.updateData(i)}),[i]),Object(n.useEffect)((function(){k.updateLocks(r)}),[r]);var p=function(e,t){var a=Object(u.a)(i.colums[e].taskIds),n=Object(u.a)(i.columnOrder);n.splice(t,1);var c=Object(m.a)({},i.colums);delete c[e];var s=Object(m.a)({},i.tasks);a.forEach((function(e){return delete s[e]}));var l={tasks:s,colums:c,columnOrder:n};console.log(l),o(l)},v=function(e,t){var a=i.colums[t].taskIds.filter((function(t){return t!==e})),n=Object(m.a)({},i.colums,Object(d.a)({},t,Object(m.a)({},i.colums[t],{taskIds:a}))),c=Object(m.a)({},i.tasks);delete c[e];var s=Object(m.a)({},i,{tasks:c,colums:n});o(s)},O=function(e,t){var a=W(),n={id:a,contact:e,info:{media:"",show:!0}},c={tasks:Object(m.a)({},i.tasks,Object(d.a)({},a,n)),colums:Object(m.a)({},i.colums,Object(d.a)({},t,Object(m.a)({},i.colums[t],{taskIds:[].concat(Object(u.a)(i.colums[t].taskIds),[a])}))),columnOrder:Object(u.a)(i.columnOrder)};o(c)},E=function(e){var t=r.findIndex((function(t){return t===e}));if(-1===t)b([].concat(Object(u.a)(r),[e]));else{var a=Object(u.a)(r);a.splice(t,1),b(a)}},h=function(e){var t=Object(m.a)({},i.tasks[e]);t.info.show=!t.info.show;var a=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,t))});o(a)},j=function(e,t){var a=Object(m.a)({},i.tasks[e]);a.info.media=t;var n=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,a))});o(n)},w=function(e,t){var a=Object(m.a)({},i.tasks[e]);a.info.tdList.push({isFinish:!1,title:t});var n=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,a))});o(n)},y=function(e,t){var a=Object(m.a)({},i.tasks[e]);a.info.tdList[t].isFinish=!a.info.tdList[t].isFinish;var n=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,a))});o(n)},I=function(e,t){var a=Object(m.a)({},i.tasks[e]);a.info.tdList.splice(t,1);var n=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,a))});o(n)},x=function(e){var t=Object(m.a)({},i.tasks[e]);if(!t.info.tdList){t.info.tdList=[];var a=Object(m.a)({},i,{tasks:Object(m.a)({},i.tasks,Object(d.a)({},e,t))});o(a)}};return c.a.createElement("div",{className:"main-div"},c.a.createElement(g.a,{onDragEnd:function(e){var t;document.body.style.color="inherit",document.body.style.backgroundColor="inherit";var a=e.destination,n=e.source,c=e.draggableId,s=e.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index))if("column"!==s){var l=i.colums[n.droppableId],r=i.colums[a.droppableId];if(l!==r){var u=Array.from(l.taskIds);u.splice(n.index,1);var f=Object(m.a)({},l,{taskIds:u}),b=Array.from(r.taskIds);b.splice(a.index,0,c);var p=Object(m.a)({},r,{taskIds:b}),k=Object(m.a)({},i,{colums:Object(m.a)({},i.colums,(t={},Object(d.a)(t,f.id,f),Object(d.a)(t,p.id,p),t))});o(k)}else{var g=Array.from(l.taskIds);g.splice(n.index,1),g.splice(a.index,0,c);var v=Object(m.a)({},l,{taskIds:g}),O=Object(m.a)({},i,{colums:Object(m.a)({},i.colums,Object(d.a)({},v.id,v))});o(O)}}else{var E=Array.from(i.columnOrder);E.splice(n.index,1),E.splice(a.index,0,c);var h=Object(m.a)({},i,{columnOrder:E});o(h)}},onDragStart:function(e){console.log(e),B.emit("close-menu",e.draggableId),document.body.style.color="grey"},onDragUpdate:function(e){var t=e.destination,a=t?t.index/Object.keys(i.tasks).length:0;document.body.style.backgroundColor="rgba(180, 214, 211,".concat(a,")"),document.body.style.transition="background-color .3s ease"}},c.a.createElement("section",{className:"flex align-start specialities"},c.a.createElement(g.c,{droppableId:"all-columns",direction:"horizontal",type:"column"},(function(e){return c.a.createElement("ul",Object.assign({},e.droppableProps,{ref:e.innerRef,className:"flex align-start"}),i.columnOrder.map((function(e,t){var a=i.colums[e],n=a.taskIds.map((function(e){return i.tasks[e]}));return c.a.createElement(H,{key:a.id,addTD:w,editData:j,column:a,tasks:n,index:t,toggleIsShown:h,toggleIsFinish:y,addTask:O,removeColumn:p,removeTask:v,lockTasks:r,toggleIsLock:E,removeTD:I,createTD:x})})),e.placeholder)})),c.a.createElement("div",{className:"add-column-container"},c.a.createElement(X,{addColumn:function(e){var t=W(),a={id:t,title:e,taskIds:[]},n={tasks:Object(m.a)({},i.tasks),colums:Object(m.a)({},i.colums,Object(d.a)({},t,a)),columnOrder:[].concat(Object(u.a)(i.columnOrder),[t])};o(n)}})))))}function G(e){return c.a.createElement("section",null,c.a.createElement(Z,null))}var Q=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(l.a,null,c.a.createElement(r.c,null,c.a.createElement(r.a,{component:G,path:"/"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(57);var Y=a(9),ee=a(43),te={tasks:[]},ae=Object(Y.c)({task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":return Object(m.a)({},e,{tasks:t.tasks});case"TASK_ADD":return Object(m.a)({},e,{tasks:[].concat(Object(u.a)(e.tasks),[t.task])});case"TASK_UPDATE":return Object(m.a)({},e,{tasks:e.tasks.map((function(e){return e._id===t.task._id?t.task:e}))});case"TASK_REMOVE":return Object(m.a)({},e,{tasks:e.tasks.filter((function(e){return e._id!==t.taskId}))});default:return e}}}),ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.d,ce=Object(Y.e)(ae,ne(Object(Y.a)(ee.a)));o.a.render(c.a.createElement(s.a,{store:ce},c.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.e0cb35dd.chunk.js.map